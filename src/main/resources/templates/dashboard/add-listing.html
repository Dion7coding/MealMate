<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/layout :: head(title='Manage Listing')}"></head>

<body class="d-flex flex-column min-vh-100 bg-light">

    <nav th:replace="~{fragments/layout :: navbar}"></nav>

    <div class="container flex-grow-1 py-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card border-0 shadow-lg">
                    <div class="card-header bg-white border-0 pt-4 px-4">
                        <h3 class="fw-bold text-success mb-0"
                            th:text="${listingDto.id == null ? 'Add New Listing' : 'Edit Listing'}">Add New Listing</h3>
                        <p class="text-muted">Provide details about the surplus food item.</p>
                    </div>
                    <div class="card-body p-4">
                        <form th:action="@{/dashboard/add}" th:object="${listingDto}" method="post">
                            <input type="hidden" th:field="*{id}">

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="itemName" class="form-label">Item Name</label>
                                    <input type="text" class="form-control" id="itemName" th:field="*{itemName}"
                                        placeholder="e.g. Vegetable Curry" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="category" class="form-label">Category</label>
                                    <select class="form-select" id="category" th:field="*{category}">
                                        <option value="Cooked Food">Cooked Food</option>
                                        <option value="Groceries">Groceries</option>
                                        <option value="Bakery">Bakery</option>
                                        <option value="Packaged">Packaged</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="description" class="form-label">Description</label>
                                <textarea class="form-control" id="description" th:field="*{description}" rows="3"
                                    placeholder="Describe the food item..."></textarea>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label for="quantity" class="form-label">Quantity</label>
                                    <input type="number" class="form-control" id="quantity" th:field="*{quantity}"
                                        min="1" required>
                                </div>
                                <div class="col-md-4">
                                    <label for="unit" class="form-label">Unit (e.g. kg, pcs)</label>
                                    <input type="text" class="form-control" id="unit" th:field="*{unit}" required>
                                </div>
                                <div class="col-md-4">
                                    <label for="expiryTimeStr" class="form-label">Pickup Before</label>
                                    <!-- Using datetime-local input -->
                                    <input type="datetime-local" class="form-control" id="expiryTimeStr"
                                        th:field="*{expiryTimeStr}" required>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label for="currency" class="form-label">Currency</label>
                                    <select class="form-select" id="currency" th:field="*{currency}">
                                        <option value="USD">USD ($)</option>
                                        <option value="EUR">EUR (€)</option>
                                        <option value="GBP">GBP (£)</option>
                                        <option value="INR">INR (₹)</option>
                                        <option value="AUD">AUD (A$)</option>
                                        <option value="CAD">CAD (C$)</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label for="price" class="form-label">Original Price</label>
                                    <input type="number" step="0.01" class="form-control" id="price"
                                        th:field="*{price}">
                                </div>
                                <div class="col-md-4">
                                    <label for="discountedPrice" class="form-label">Discounted Price</label>
                                    <input type="number" step="0.01" class="form-control" id="discountedPrice"
                                        th:field="*{discountedPrice}">
                                    <div class="form-text text-success small">Discounted price!</div>
                                </div>
                            </div>

                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <label for="pickupLocation" class="form-label">Pickup Location</label>
                                    <input type="text" class="form-control" id="pickupLocation"
                                        th:field="*{pickupLocation}" placeholder="Store address" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="contactNumber" class="form-label">Contact Number</label>
                                    <input type="text" class="form-control" id="contactNumber"
                                        th:field="*{contactNumber}" placeholder="Phone number" required>
                                </div>
                            </div>

                            <div class="d-flex justify-content-end gap-2">
                                <a href="/dashboard" class="btn btn-secondary">Cancel</a>
                                <button type="submit" class="btn btn-primary-custom"
                                    th:text="${listingDto.id == null ? 'List Item' : 'Update Listing'}">List
                                    Item</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer th:replace="~{fragments/layout :: footer}"></footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>